schemaVersion: 2.2.0
metadata:
  name: eap73-dev
  version: 1.0.0
  displayName: EAP 7.3 Minimal Dev Env
  description: A lightweight DevSpaces environment for Red Hat JBoss EAP 7.3

components:
  - name: eap73-runtime
    container:
      image: registry.redhat.io/jboss-eap-7/eap73-openjdk11-openshift-rhel8:7.3.10-2
      memoryLimit: "2Gi"
      cpuLimit: "1"
      mountSources: true
      sourceMapping: /projects
      endpoints:
        - name: http
          targetPort: 8080
          exposure: public
        - name: management
          targetPort: 9990
          exposure: internal

commands:
  - id: start-eap
    exec:
      component: eap73-runtime
      commandLine: ./standalone.sh -b 0.0.0.0
      workingDir: /opt/eap/bin
      group:
        kind: run
        isDefault: true